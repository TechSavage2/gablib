<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - gablib</title>
    
    
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/TechSavage2/gablib" target="_parent" class="menu-item" id="website_link" >Project Website</a></h2><h3>Modules</h3><ul><li><a href="module-Accounts.html">Accounts</a><ul class='methods'><li data-type='method'><a href="module-Accounts.html#.editMyAccount">editMyAccount</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountAttachments">getAccountAttachments</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountBlockedBys">getAccountBlockedBys</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountBlocks">getAccountBlocks</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountFollowers">getAccountFollowers</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountFollowing">getAccountFollowing</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountMutes">getAccountMutes</a></li><li data-type='method'><a href="module-Accounts.html#.getAccountRelationships">getAccountRelationships</a></li><li data-type='method'><a href="module-Accounts.html#.getFollowRequests">getFollowRequests</a></li><li data-type='method'><a href="module-Accounts.html#.getMyAccount">getMyAccount</a></li><li data-type='method'><a href="module-Accounts.html#.getRelatedAccounts">getRelatedAccounts</a></li><li data-type='method'><a href="module-Accounts.html#.getSuggestedAccounts">getSuggestedAccounts</a></li><li data-type='method'><a href="module-Accounts.html#.handleAccountFollowRequests">handleAccountFollowRequests</a></li><li data-type='method'><a href="module-Accounts.html#.searchAccounts">searchAccounts</a></li></ul></li><li><a href="module-Bookmarks.html">Bookmarks</a><ul class='methods'><li data-type='method'><a href="module-Bookmarks.html#.createBookmarkCollection">createBookmarkCollection</a></li><li data-type='method'><a href="module-Bookmarks.html#.deleteBookmarkCollection">deleteBookmarkCollection</a></li><li data-type='method'><a href="module-Bookmarks.html#.editBookmarkCollection">editBookmarkCollection</a></li><li data-type='method'><a href="module-Bookmarks.html#.getBookmarkCollection">getBookmarkCollection</a></li></ul></li><li><a href="module-Groups.html">Groups</a><ul class='methods'><li data-type='method'><a href="module-Groups.html#.createGroup">createGroup</a></li><li data-type='method'><a href="module-Groups.html#.editGroup">editGroup</a></li><li data-type='method'><a href="module-Groups.html#.getFeaturedGroups">getFeaturedGroups</a></li><li data-type='method'><a href="module-Groups.html#.getGroup">getGroup</a></li><li data-type='method'><a href="module-Groups.html#.getGroupCategories">getGroupCategories</a></li><li data-type='method'><a href="module-Groups.html#.getGroupJoinRequests">getGroupJoinRequests</a></li><li data-type='method'><a href="module-Groups.html#.getGroupModerationStats">getGroupModerationStats</a></li><li data-type='method'><a href="module-Groups.html#.getGroupRelationships">getGroupRelationships</a></li><li data-type='method'><a href="module-Groups.html#.getGroupsByCategory">getGroupsByCategory</a></li><li data-type='method'><a href="module-Groups.html#.getGroupsByTag">getGroupsByTag</a></li><li data-type='method'><a href="module-Groups.html#.getMyAdminGroups">getMyAdminGroups</a></li><li data-type='method'><a href="module-Groups.html#.getMyGroups">getMyGroups</a></li><li data-type='method'><a href="module-Groups.html#.getSuggestedGroups">getSuggestedGroups</a></li><li data-type='method'><a href="module-Groups.html#.groupApproveStatus">groupApproveStatus</a></li><li data-type='method'><a href="module-Groups.html#.groupModeration">groupModeration</a></li><li data-type='method'><a href="module-Groups.html#.groupRejectStatus">groupRejectStatus</a></li><li data-type='method'><a href="module-Groups.html#.groupRemoveAccount">groupRemoveAccount</a></li><li data-type='method'><a href="module-Groups.html#.groupRemoveRemovedAccount">groupRemoveRemovedAccount</a></li><li data-type='method'><a href="module-Groups.html#.groupRemoveStatus">groupRemoveStatus</a></li><li data-type='method'><a href="module-Groups.html#.groupUpdateRole">groupUpdateRole</a></li><li data-type='method'><a href="module-Groups.html#.groupWhitelistFromStatus">groupWhitelistFromStatus</a></li><li data-type='method'><a href="module-Groups.html#.handleGroupJoinRequest">handleGroupJoinRequest</a></li><li data-type='method'><a href="module-Groups.html#.joinGroup">joinGroup</a></li><li data-type='method'><a href="module-Groups.html#.leaveGroup">leaveGroup</a></li><li data-type='method'><a href="module-Groups.html#.listGroupAccounts">listGroupAccounts</a></li><li data-type='method'><a href="module-Groups.html#.listGroupAdminsAndMods">listGroupAdminsAndMods</a></li><li data-type='method'><a href="module-Groups.html#.listGroupAttachments">listGroupAttachments</a></li><li data-type='method'><a href="module-Groups.html#.listGroupLinks">listGroupLinks</a></li><li data-type='method'><a href="module-Groups.html#.listGroupRemovedAccounts">listGroupRemovedAccounts</a></li><li data-type='method'><a href="module-Groups.html#.muteGroup">muteGroup</a></li><li data-type='method'><a href="module-Groups.html#.requestGroupJoin">requestGroupJoin</a></li><li data-type='method'><a href="module-Groups.html#.searchGroupMembers">searchGroupMembers</a></li><li data-type='method'><a href="module-Groups.html#.unmuteGroup">unmuteGroup</a></li></ul></li><li><a href="module-Login.html">Login</a><ul class='methods'><li data-type='method'><a href="module-Login.html#.login">login</a></li><li data-type='method'><a href="module-Login.html#.refreshSession">refreshSession</a></li></ul></li><li><a href="module-Misc.html">Misc</a><ul class='methods'><li data-type='method'><a href="module-Misc.html#.getConversationOwner">getConversationOwner</a></li><li data-type='method'><a href="module-Misc.html#.getSuggestedFeeds">getSuggestedFeeds</a></li></ul></li><li><a href="module-Notifications.html">Notifications</a><ul class='methods'><li data-type='method'><a href="module-Notifications.html#.getNotifications">getNotifications</a></li><li data-type='method'><a href="module-Notifications.html#.markNotificationsRead">markNotificationsRead</a></li></ul></li><li><a href="module-Public.html">Public</a><ul class='methods'><li data-type='method'><a href="module-Public.html#.getAccountFromId">getAccountFromId</a></li><li data-type='method'><a href="module-Public.html#.getAccountFromUsername">getAccountFromUsername</a></li><li data-type='method'><a href="module-Public.html#.getExplore">getExplore</a></li><li data-type='method'><a href="module-Public.html#.getNewsFeed">getNewsFeed</a></li><li data-type='method'><a href="module-Public.html#.getPopularStatuses">getPopularStatuses</a></li><li data-type='method'><a href="module-Public.html#.getProFeed">getProFeed</a></li><li data-type='method'><a href="module-Public.html#.getTrendsFeed">getTrendsFeed</a></li></ul></li><li><a href="module-Search.html">Search</a><ul class='methods'><li data-type='method'><a href="module-Search.html#.search">search</a></li></ul></li><li><a href="module-Shortcuts.html">Shortcuts</a><ul class='methods'><li data-type='method'><a href="module-Shortcuts.html#.addShortcut">addShortcut</a></li><li data-type='method'><a href="module-Shortcuts.html#.clearShortcutCount">clearShortcutCount</a></li><li data-type='method'><a href="module-Shortcuts.html#.deleteShortcut">deleteShortcut</a></li><li data-type='method'><a href="module-Shortcuts.html#.getShortcuts">getShortcuts</a></li><li data-type='method'><a href="module-Shortcuts.html#.reorderShortcut">reorderShortcut</a></li></ul></li><li><a href="module-Statuses.html">Statuses</a><ul class='methods'><li data-type='method'><a href="module-Statuses.html#.bookmarkStatus">bookmarkStatus</a></li><li data-type='method'><a href="module-Statuses.html#.bookmarkStatusState">bookmarkStatusState</a></li><li data-type='method'><a href="module-Statuses.html#.createStatus">createStatus</a></li><li data-type='method'><a href="module-Statuses.html#.deleteStatus">deleteStatus</a></li><li data-type='method'><a href="module-Statuses.html#.editStatus">editStatus</a></li><li data-type='method'><a href="module-Statuses.html#.favoritePost">favoritePost</a></li><li data-type='method'><a href="module-Statuses.html#.getAccountStatuses">getAccountStatuses</a></li><li data-type='method'><a href="module-Statuses.html#.getComments">getComments</a></li><li data-type='method'><a href="module-Statuses.html#.getStatus">getStatus</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusContext">getStatusContext</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusQuotes">getStatusQuotes</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusRepostedBy">getStatusRepostedBy</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusRevisions">getStatusRevisions</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusStats">getStatusStats</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusesFromTag">getStatusesFromTag</a></li><li data-type='method'><a href="module-Statuses.html#.getStatusesWithCard">getStatusesWithCard</a></li><li data-type='method'><a href="module-Statuses.html#.getTimelineStatuses">getTimelineStatuses</a></li><li data-type='method'><a href="module-Statuses.html#.moveStatus">moveStatus</a></li><li data-type='method'><a href="module-Statuses.html#.pinStatus">pinStatus</a></li><li data-type='method'><a href="module-Statuses.html#.pinStatusState">pinStatusState</a></li><li data-type='method'><a href="module-Statuses.html#.setMarkdownFunction">setMarkdownFunction</a></li><li data-type='method'><a href="module-Statuses.html#.unbookmarkStatus">unbookmarkStatus</a></li><li data-type='method'><a href="module-Statuses.html#.unfavoritePost">unfavoritePost</a></li><li data-type='method'><a href="module-Statuses.html#.unpinStatus">unpinStatus</a></li><li data-type='method'><a href="module-Statuses.html#.uploadMedia">uploadMedia</a></li></ul></li><li><a href="module-Streaming.html">Streaming</a><ul class='methods'><li data-type='method'><a href="module-Streaming.html#.getStream">getStream</a></li></ul></li><li><a href="module-Utils.html">Utils</a><ul class='members'><li data-type='member'><a href="module-Utils.html#.gablibEvents">gablibEvents</a></li></ul><ul class='methods'><li data-type='method'><a href="module-Utils.html#.findObjectId">findObjectId</a></li><li data-type='method'><a href="module-Utils.html#.inverseMap">inverseMap</a></li><li data-type='method'><a href="module-Utils.html#.mapObject">mapObject</a></li><li data-type='method'><a href="module-Utils.html#.sleep">sleep</a></li><li data-type='method'><a href="module-Utils.html#.stripMD">stripMD</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="LoginObject.html">LoginObject</a><ul class='methods'><li data-type='method'><a href="LoginObject.html#deserialize">deserialize</a></li><li data-type='method'><a href="LoginObject.html#serialize">serialize</a></li></ul></li><li><a href="Poll.html">Poll</a></li></ul><h3>Global</h3><ul><li><a href="global.html#enumAccountFollowRequest">enumAccountFollowRequest</a></li><li><a href="global.html#enumAccountMediaType">enumAccountMediaType</a></li><li><a href="global.html#enumGroupModerationJoin">enumGroupModerationJoin</a></li><li><a href="global.html#enumPollExpires">enumPollExpires</a></li><li><a href="global.html#enumPostExpires">enumPostExpires</a></li><li><a href="global.html#enumReactions">enumReactions</a></li><li><a href="global.html#enumSearchFilterTypes">enumSearchFilterTypes</a></li><li><a href="global.html#enumShortType">enumShortType</a></li><li><a href="global.html#enumStatusSort">enumStatusSort</a></li><li><a href="global.html#enumTimelines">enumTimelines</a></li><li><a href="global.html#enumVisibility">enumVisibility</a></li></ul><h3>Events</h3><ul><li><a href="module-Streaming.html#~event:stream-ended">stream-ended</a></li><li><a href="module-Streaming.html#~event:stream-event">stream-event</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>gablib</h1>
<p>API package for scripting/programming Mastodon nodes where OAuth2 for custom apps has been disabled
on the server.</p>
<p>This package will allow you to build apps by logging in programmatically via the regular &quot;human&quot;
auth/sign_in page and extract tokens for operations that requires authentication.</p>
<p>This is not a standalone package/app but intended to be used as part of a custom client or for
scripting.</p>
<p><strong>⚠️ NOTE: The API is currently <em>not stable</em> and in ALPHA, a WIP. Breaking changes could happen.
Use it as a tech preview. Avoid use for production as of now. This message will go away when the
API is frozen.</strong></p>
<h2>Requirements</h2>
<p>One of:</p>
<ul>
<li><a href="https://nodejs.org/en/">NodeJS</a> version 18 or newer (for the fetch api).</li>
<li><a href="https://bun.sh/">Bun</a> version 1.0.21 or newer.</li>
</ul>
<h2>Installation</h2>
<p>Using <code>npm</code> to install the package into your nodejs project:</p>
<pre class="prettyprint source lang-bash"><code>$ npm install https://github.com/TechSavage2/gablib
</code></pre>
<p>Alternatively, you can use <code>yarn</code> to install the package into your nodejs project:</p>
<pre class="prettyprint source lang-bash"><code>$ yarn add https://github.com/TechSavage2/gablib
</code></pre>
<p>or <code>pnpm</code>:</p>
<pre class="prettyprint source lang-bash"><code>$ pnpm install https://github.com/TechSavage2/gablib
</code></pre>
<p>It's now ready for use. As of now there are no other dependencies to be installed.</p>
<h2>Features</h2>
<ul>
<li>[x] Asynchronous</li>
<li>[x] Easy to use</li>
<li>[x] ES modules (import/export)</li>
<li>[x] login using the <em>sign_in</em> form instead of OAuth</li>
<li>[x] API calls requiring authentications (WIP)</li>
<li>[x] public API calls (WIP)</li>
<li>[x] 'normalizes' Gab's remapped status lists format to that of normal Mastodon</li>
<li>[x] can use a custom markdown stripper</li>
<li>[x] streaming API as events</li>
<li>[x] Optional automatic (de)serializing of session/auth data for reuse between executions (experimental)</li>
<li>[ ] events (responses, errors, upload/download progress, etc.)</li>
</ul>
<h2>APIs</h2>
<p>NOTE: currently unstable/may change.</p>
<ul>
<li>Full support for <strong>Statuses and Comments</strong>
<ul>
<li>Create Edit, Delete, Attachments, Timelines, (Un)Favorite, (Un)Bookmark, (Un)Pin, Move (aux function), Comment, Comment trees, Context, Posting to groups, Statuses from Tags, Revisions, Cards, Quotes, Replies, Stats</li>
<li>Custom (optional) plugin for handling Markdown stripping.</li>
<li>Handles and remaps Gab's rearranged results as well as the shortened properties on status JSONs.</li>
</ul>
</li>
<li>Full support for <strong>Groups</strong>
<ul>
<li>Create, Edit, Categories, Moderation</li>
</ul>
</li>
<li>Full support for <strong>Bookmark Collections</strong>
<ul>
<li>List collections, Create, Edit, Delete</li>
</ul>
</li>
<li>Full support for <strong>Notifications</strong>
<ul>
<li>Get notifications, Mark read, Filters</li>
</ul>
</li>
<li>Full support for <strong>Shortcuts</strong>
<ul>
<li>List, Add, Delete, Reorder</li>
</ul>
</li>
<li>Support for <strong>Accounts</strong> (WIP)
<ul>
<li>Stats, (Edit, Account Settings)</li>
</ul>
</li>
<li>Support for <strong>Lists</strong> (TODO)</li>
<li>Support for <strong>Feeds</strong> (TODO)</li>
<li>Support for <strong>Chats/DM</strong> (TODO)</li>
<li>Support for <strong>Public</strong> APIs (no authentication required)
<ul>
<li>Account information, Trends feed, News feed, Popular statuses</li>
</ul>
</li>
<li>Full support for site wide <strong>search</strong>
<ul>
<li>All, filters</li>
</ul>
</li>
<li>Support for <strong>Site Settings</strong> (TODO)</li>
<li>Supports the streaming API</li>
<li>Experimental support for (de)serialization of session/auth between executions.</li>
</ul>
<h2>Getting Started</h2>
<p>Make sure you have a registered and active account with the Mastodon site you want to log on to.</p>
<p>Make sure to initialize environmental variables on your system.</p>
<p>For Linux, you can use:</p>
<pre class="prettyprint source lang-bash"><code>export MASTODON_USEREMAIL='your@mastodon.email'
export MASTODON_PASSWORD='yourSecretPassword'
export MASTODON_BASEURL='https://somemastodon.site'
</code></pre>
<p>Put this in for example your <code>~/.profile</code> file.</p>
<p>You can also use different environment names and simply supply them instead (
see <a href="https://github.com/TechSavage2/gablib/wiki/Authenticating">wiki</a>.)</p>
<p>This package uses the ES module format (i.e. use <code>import</code> statements.)</p>
<p>To use ESM in your project, either update <code>package.json</code> with the following:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;type&quot;: &quot;module&quot;
}
</code></pre>
<p>or use the <code>.mjs</code> extension for your JavaScript files.</p>
<p>To import a function you can then use:</p>
<pre class="prettyprint source lang-JavaScript"><code>import { login } from 'gablib/gablib.js';
</code></pre>
<p>or if you prefer the entire library on a single object:</p>
<pre class="prettyprint source lang-JavaScript"><code>import * as gablib from 'gablib/gablib.js';
</code></pre>
<p>Now call the primary function to log in:</p>
<pre class="prettyprint source lang-JavaScript"><code>import { login } from 'gablib/gablib.js';

const loginObject = await login();  // note that the call is asynchronous
</code></pre>
<p>If successful login, the object is now initialized for use with API functions. If login failed it
will <em>throw an error</em>. Check that your credentials are correct and if a complex password that it's
properly escaped (if using env.)</p>
<h2>Documentation</h2>
<p>Online documentation (JSDoc) can be found here</p>
<p>https://techsavage2.github.io/gablib/</p>
<p>Wiki page with examples and tips:</p>
<p>https://github.com/TechSavage2/gablib/wiki</p>
<p>To see specifics for each API call, JSON structures and so on, the official Mastodon can be useful.
Note that some Mastodon sites (such as Gab) have modified some of these responses, JSONs and API
calls, but to get the broader gist this is still helpful:</p>
<p>https://docs.joinmastodon.org/methods/</p>
<h2>Local Docs</h2>
<p>You can generate a local version of the documentation by installing the
developer dependencies. While in the project root folder:</p>
<pre class="prettyprint source lang-bash"><code>$ npm i -D
</code></pre>
<p>Then run:</p>
<pre class="prettyprint source lang-bash"><code>$ npm run docs
</code></pre>
<p>If you don't like to use the dark theme simply edit the <code>jsdocs.json</code> and remove the custom
CSS file referenced in the <code>scripts</code> property.</p>
<p>The docs are now found in the <code>docs/</code> folder. You may want to fire up a local
server for the folder for everything to work smoothly.</p>
<p>For example if you have python installed:</p>
<pre class="prettyprint source lang-bash"><code>cd docs/
python -m http.server
</code></pre>
<p>Go to the link to see the docs.</p>
<h2>Issues</h2>
<p>See <a href="https://github.com/TechSavage2/gablib/issues">issues</a></p>
<h2>Notes</h2>
<p>The package has only been tested with Linux so far, but there shouldn't be anything preventing
it from working with Windows, macOS and other platforms as well.</p>
<h2>License</h2>
<p>AGPL</p>
<p>Copyright (c) 2024 TechSavage</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Fri Jan 12 2024 08:34:44 GMT-0600 (Central Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <link type="text/css" rel="stylesheet" href="jsdoc-custom.css">
    
</body>
</html>